# ============================================
# REDIS & BULLMQ - PRODUCTION ENVIRONMENT
# ============================================
# Template para Hetzner VPS - Localhost apenas
# NUNCA commitar este arquivo com valores reais!

# ============================================
# REDIS CONNECTION
# ============================================
# CRÍTICO: Redis deve rodar APENAS em localhost (127.0.0.1)
REDIS_HOST=127.0.0.1
REDIS_PORT=6379
REDIS_DB=0

# SENHA FORTE OBRIGATÓRIA
# Gere com: openssl rand -base64 32
# SUBSTITUA ESTE VALOR ANTES DE USAR EM PRODUÇÃO!
REDIS_PASSWORD=CHANGE_ME_TO_STRONG_PASSWORD

# ============================================
# BULLMQ CONFIGURATION
# ============================================
# Máximo de tentativas de reconexão (padrão: 2)
# Valores baixos evitam loops e economizam recursos da VM
BULLMQ_MAX_RETRIES=2

# Timeout de conexão em milissegundos (padrão: 3000)
# Falha rápido para evitar travamentos
BULLMQ_CONNECTION_TIMEOUT=3000

# Timeout de comandos em milissegundos (padrão: 3000)
# Comandos lentos falham rápido
BULLMQ_COMMAND_TIMEOUT=3000

# ============================================
# INSTRUÇÕES DE SEGURANÇA
# ============================================
# 1. GERAR SENHA FORTE:
#    openssl rand -base64 32
#
# 2. VERIFICAR REDIS ESTÁ EM LOCALHOST:
#    netstat -tlnp | grep 6379
#    Deve mostrar APENAS: 127.0.0.1:6379
#
# 3. CONFIGURAR FIREWALL (ver REDIS_SECURITY.md):
#    sudo ufw deny 6379
#    sudo iptables -A INPUT -p tcp --dport 6379 -j DROP
#
# 4. TESTAR CONEXÃO:
#    redis-cli -h 127.0.0.1 -p 6379 -a "SUA_SENHA" ping
#
# 5. VERIFICAR CONFIGURAÇÃO:
#    redis-cli -h 127.0.0.1 -p 6379 -a "SUA_SENHA" CONFIG GET bind
#    Deve retornar: 127.0.0.1 ::1

# ============================================
# AVISOS IMPORTANTES
# ============================================
# ⚠️  NUNCA use REDIS_HOST=0.0.0.0 ou IP público
# ⚠️  NUNCA exponha porta 6379 para internet
# ⚠️  SEMPRE use senha forte (mínimo 32 caracteres)
# ⚠️  SEMPRE configure firewall bloqueando porta 6379
# ⚠️  SEMPRE use protected-mode yes no redis.conf
# ⚠️  Hetzner BLOQUEIA VPS que fazem scan de rede!

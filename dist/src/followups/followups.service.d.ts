import { PrismaService } from "../database/prisma.service";
import { WhatsAppIntegrationService } from "../integrations/whatsapp/whatsapp-integration.service";
import { OpenAIService } from "../ai/services/openai.service";
export declare class FollowupsService {
    private prisma;
    private whatsappService;
    private openaiService;
    constructor(prisma: PrismaService, whatsappService: WhatsAppIntegrationService, openaiService: OpenAIService);
    findAll(agentId: string): Promise<{
        messageTemplate: string;
        delayMinutes: number;
        message: string;
        id: string;
        organizationId: string;
        agentId: string;
        createdAt: Date;
        name: string;
        isActive: boolean;
        updatedAt: Date;
        crmStageId: string | null;
        mediaUrl: string | null;
        mediaType: string;
        condition: string;
        delayHours: number;
        aiDecisionEnabled: boolean;
        aiDecisionPrompt: string | null;
        audioVoiceId: string | null;
        respectBusinessHours: boolean;
        specificHour: number | null;
        specificMinute: number | null;
        specificTimeEnabled: boolean;
        matrixStageId: string | null;
    }[]>;
    findOne(id: string): Promise<{
        messageTemplate: string;
        delayMinutes: number;
        logs: {
            message: string;
            id: string;
            leadId: string;
            sentAt: Date;
            followupId: string;
        }[];
        message: string;
        id: string;
        organizationId: string;
        agentId: string;
        createdAt: Date;
        name: string;
        isActive: boolean;
        updatedAt: Date;
        crmStageId: string | null;
        mediaUrl: string | null;
        mediaType: string;
        condition: string;
        delayHours: number;
        aiDecisionEnabled: boolean;
        aiDecisionPrompt: string | null;
        audioVoiceId: string | null;
        respectBusinessHours: boolean;
        specificHour: number | null;
        specificMinute: number | null;
        specificTimeEnabled: boolean;
        matrixStageId: string | null;
    } | null>;
    create(data: any): Promise<{
        messageTemplate: string;
        delayMinutes: number;
        message: string;
        id: string;
        organizationId: string;
        agentId: string;
        createdAt: Date;
        name: string;
        isActive: boolean;
        updatedAt: Date;
        crmStageId: string | null;
        mediaUrl: string | null;
        mediaType: string;
        condition: string;
        delayHours: number;
        aiDecisionEnabled: boolean;
        aiDecisionPrompt: string | null;
        audioVoiceId: string | null;
        respectBusinessHours: boolean;
        specificHour: number | null;
        specificMinute: number | null;
        specificTimeEnabled: boolean;
        matrixStageId: string | null;
    }>;
    update(id: string, data: any): Promise<{
        messageTemplate: string;
        delayMinutes: number;
        message: string;
        id: string;
        organizationId: string;
        agentId: string;
        createdAt: Date;
        name: string;
        isActive: boolean;
        updatedAt: Date;
        crmStageId: string | null;
        mediaUrl: string | null;
        mediaType: string;
        condition: string;
        delayHours: number;
        aiDecisionEnabled: boolean;
        aiDecisionPrompt: string | null;
        audioVoiceId: string | null;
        respectBusinessHours: boolean;
        specificHour: number | null;
        specificMinute: number | null;
        specificTimeEnabled: boolean;
        matrixStageId: string | null;
    }>;
    delete(id: string): Promise<{
        success: boolean;
    }>;
    checkAgentFollowUps(forceIgnoreDelay?: boolean): Promise<{
        processed: number;
        rulesChecked: number;
    }>;
    private getFollowupEligibleConversations;
    private checkFollowupConditions;
    private sendFollowup;
    private checkWorkingHours;
    private parseTime;
}
